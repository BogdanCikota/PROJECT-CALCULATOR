<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/index.css">
    <title>Calculator</title>
</head>
<body>
    <div class="container calc-container bg-dark mt-lg-5 mt-2  pb-2 ">
        <div class="row">
            <div id="display" class="col text-right mr-2 ml-2 p-2 text-white "></div>
        </div>
        <div class="row p-2">
            <button class="on-off-ac col rounded-circle mr-2 ml-2 p-2 bg-light">ON</button>
            <button class="on-off-ac col rounded-circle mr-2 ml-2 p-2 bg-light">OFF</button>
            <button class="on-off-ac col rounded-circle mr-2 ml-2 p-2 bg-light">AC</button>
            <button class="numBtn operatorBtn col rounded-circle mr-2 ml-2 p-2 bg-warning text-white">/</button>
        </div>
        <div class="row p-2">
            <button class="numBtn col rounded-circle mr-2 ml-2 p-2 text-white bg-dark">7</button>
            <button class="numBtn col rounded-circle mr-2 ml-2 p-2 text-white bg-dark">8</button>
            <button class="numBtn col rounded-circle mr-2 ml-2 p-2 text-white bg-dark">9</button>
            <button class="numBtn operatorBtn col rounded-circle mr-2 ml-2 p-2 bg-warning text-white">*</button>
        </div>
        <div class="row p-2">
            <button class="numBtn col rounded-circle mr-2 ml-2 p-2 text-white bg-dark">4</button>
            <button class="numBtn col rounded-circle mr-2 ml-2 p-2 text-white bg-dark">5</button>
            <button class="numBtn col rounded-circle mr-2 ml-2 p-2 text-white bg-dark">6</button>
            <button class="numBtn operatorBtn col rounded-circle mr-2 ml-2 p-2 bg-warning text-white">-</button>
        </div>
        <div class="row p-2">
            <button class="numBtn col rounded-circle mr-2 ml-2 p-2 text-white bg-dark">1</button>
            <button class="numBtn col rounded-circle mr-2 ml-2 p-2 text-white bg-dark">2</button>
            <button class="numBtn col rounded-circle mr-2 ml-2 p-2 text-white bg-dark">3</button>
            <button class="numBtn operatorBtn col rounded-circle mr-2 ml-2 p-2 bg-warning text-white">+</button>
        </div>
        <div class="row p-2">
            <button class="numBtn col-5 rounded-pill mr-2 ml-2 p-2 text-white bg-dark">0</button>
            <button class="numBtn col rounded-circle mr-2 ml-2 p-2 text-white bg-dark">.</button>
            <button id="res" class="col rounded-circle mr-2 ml-2 p-2 bg-warning text-white">=</button>
        </div>
    </div>

    <script>
        //Your calculator is going to contain functions for all of the basic math
        // operators you typically find on simple calculators, 
        //so start by creating functions for the following items and testing them in your browserâ€™s console.
        let num1;
        let operator;
        let num2;
        function add(num1, num2){
            return num1 + num2;
        }

        function subtract(num1, num2){
            return num1 - num2;
        }

        function multiply(num1, num2){
            return num1 * num2;
        }

        function divide(num1, num2){
            return num1 / num2;
        }
     
        

        //Create a new function "operate" that takes an operator and 2 numbers 
        //and then calls one of the above functions on the numbers.

        function operate(num1, operator, num2) {
            switch(operator) {
                case '+' :
                    return add(num1, num2);
                    break;
                case '-' :
                    return subtract(num1, num2);
                    break;
                case '*':
                    return multiply(num1, num2);
                    break;
                default:
                    return divide(num1, num2);
            }
        }

        let display = document.querySelector('#display');
        let numBtn = document.querySelectorAll('.numBtn');
        let operatorTrueFalse = false;
        let operatorBtn = document.querySelectorAll('.operatorBtn');
        operatorBtn.forEach(btn => {
            btn.addEventListener('click', function(){
                operatorTrueFalse = true;
                operator = btn.textContent;
            });
            
        });
        
        //make an array that has [0] = num1, [1] = operator, [2] = num2
        let arr = [];
        let num = [];
        numBtn.forEach(btn => {
            btn.addEventListener('click', function(){
                
                if(operatorTrueFalse === false ) {
                    display.textContent += btn.textContent;
                    num.push(display.textContent);
                    
                } else {
                    arr.push(num[num.length-1]);
                    arr.push(operator);
                    operatorTrueFalse = false;
                    display.textContent = '';
                }

                arr = arr.filter(items => items !== undefined);
            });
        });
      
        let res = false;
        let resbtn = document.getElementById('res');
        let operatorArr = [];
        resbtn.addEventListener('click', function(){
            res = true;
            arr.push(num[num.length-1]);
            operatorTrueFalse = false;
            display.textContent = '';
           
            
            for (let i = 0; i < arr.length; i++){
                if(arr[i] === '*' || arr[i] === '/' || arr[i] === '+' || arr[i] === '-') {
                    operatorArr.push(arr[i]);
                }
            }
     
           
            for (let i = 0; i< operatorArr.length && arr.length>2; i++) {
                
                if(typeof(arr[0] !== 'number')) {
                    num1 = arr[0];
                    num1 = parseFloat(num1);
                    operator = arr[1];
                    num2 = arr[2];
                    num2 = parseFloat(num2);
                    arr.shift(num1);
                    arr.shift(operator);
                    arr.shift(num2);
                    num1 = operate(num1, operator, num2);
                    arr.unshift(num1);
                } else {
                    num1 = arr[0];
                    operator = arr[1];
                    num2 = arr[2];
                    num2 = parseFloat(num2);
                    arr.shift(num1);
                    arr.shift(operator);
                    arr.shift(num2);
                    num1 = operate(num1, operator, num2); 
                    arr.unshift(num1);
                }
            }
       
            display.textContent = arr[0];
            num = [];
            operatorTrueFalse = false;
        });        
    </script>
    
    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/popper.js/dist/umd/popper.min.js"></script>
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
</body>
</html>